{"author":{"id":"2030cb4dd46920ca4d5c485b6843719559ec819c7619a2fe0dfb3836875929ad"},"ops":[{"type":1,"timestamp":1720221116,"nonce":"ykufDgvmnM4ah+V0wfujlvrQJsM=","metadata":{"github-id":"I_kwDOJl1IZM6OpbKl","github-url":"https://github.com/nikitabobko/AeroSpace/issues/317","origin":"github"},"title":"Query commands stealing focus","message":"Would it be possible to have query commands not force focus?\n\nhttps://github.com/nikitabobko/AeroSpace/blob/deffa6029ecd1410c3416ce66e2aa41e9cd6d636/Sources/AppBundle/server.swift#L90-L93\n\nThis leads to an issue with my setup (where I'm using sketchybar to list the workspace windows):\n\n\u003cimg width=\"333\" alt=\"Screenshot 2024-07-05 at 11 33 38â€¯PM\" src=\"https://github.com/nikitabobko/AeroSpace/assets/12696953/b2e39d8d-9293-422d-9c65-370c30f922ae\"\u003e \n\nWhat happens is:\n1. New popup window created\n2. Sketchybar [space_windows_changed](https://felixkratz.github.io/SketchyBar/config/events) event is fired \n3. Sketchybar calls `aerospace list-windows ...` to get up to date windows\n4. Aerospace refocuses the main application causing the popup to close\n\nFor a visual example see #168 which judging by the setup the OP is facing the same issue.\n\nI was able to fix it with a diff like this, however I'm not sure if this has any side effects https://gist.github.com/xdrop/50d158acaa22acb3300356f714613cb8. I can send in a PR if the solution looks reasonable (though my Swift knowledge is non-existent ðŸ˜„ )","files":null}]}