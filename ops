{"author":{"id":"ef69b857ea341b4d7d7166b32c60f2a8ae57f06c1ecb9e0e06b584c49ce51cd8"},"ops":[{"type":6,"timestamp":1726439772,"nonce":"bkKowlp7zcpousOmFWOpqaS3RQA=","metadata":{"github-id":"UCE_lAHOJl1IZM6WooK1zmS8u2U"},"target":"3b8a0abd259fdea07efba54a59a6c80717d479ff0e639c5485c038bd9cabe9ac","message":"**Executing `aerospace close` either via a bind or directly against any app where the process will be killed via `--quit-if-last-window` causes the current space to be reset.  If it is executed via a bind the workspace will jump to the next space with a window, if it is executed via the cli the current space is not visually updated but I believe under the hood selects the nearest space with a window as well.**\n\nConsider including in bug reports:\n- `aerospace debug-windows`\n```\nnet.kovidgoyal.kitty.window.434 windowId: 434\nnet.kovidgoyal.kitty.window.434 workspace: 3\nnet.kovidgoyal.kitty.window.434 treeNodeParent: AppBundle.TilingContainer\nnet.kovidgoyal.kitty.window.434 recognizedAsDialog: false\nnet.kovidgoyal.kitty.window.434 AXTitle: Optional(aerospace debug-windows)\nnet.kovidgoyal.kitty.window.434 AXRole: Optional(AXWindow)\nnet.kovidgoyal.kitty.window.434 AXSubrole: Optional(AXStandardWindow)\nnet.kovidgoyal.kitty.window.434 AXFocused: Optional(0)\nnet.kovidgoyal.kitty.window.434 AXFullScreen: Optional(0)\nnet.kovidgoyal.kitty.window.434 AXFrame: Optional(\u003cAXValue 0x600000717700\u003e {value = x:0.000000 y:34.000000 w:1496.000000 h:932.000000 type = kAXValueCGRectType})\nnet.kovidgoyal.kitty.window.434 AXPosition: Optional(\u003cAXValue 0x600001c5ac70\u003e {value = x:0.000000 y:34.000000 type = kAXValueCGPointType})\nnet.kovidgoyal.kitty.window.434 AXGrowArea: nil\nnet.kovidgoyal.kitty.window.434 AXMinimizeButton: AXUIElement {\nnet.kovidgoyal.kitty.window.434      AXRole: Optional(AXButton)\nnet.kovidgoyal.kitty.window.434      AXTitle: nil\nnet.kovidgoyal.kitty.window.434      AXSubrole: Optional(AXMinimizeButton)\nnet.kovidgoyal.kitty.window.434      AXEnabled: Optional(1)\nnet.kovidgoyal.kitty.window.434      AXParent: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXTopLevelUIElement: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXWindow: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      Ignored: AXFrame, AXSize, AXFocused, AXHelp, AXPosition, AXRoleDescription\nnet.kovidgoyal.kitty.window.434 }\nnet.kovidgoyal.kitty.window.434 AXDocument: nil\nnet.kovidgoyal.kitty.window.434 AXSections: [\nnet.kovidgoyal.kitty.window.434         Optional({\nnet.kovidgoyal.kitty.window.434             SectionDescription = Content;\nnet.kovidgoyal.kitty.window.434             SectionObject = \"\u003cAXUIElement 0x600001c46610\u003e {pid=5125}\";\nnet.kovidgoyal.kitty.window.434             SectionUniqueID = AXContent;\nnet.kovidgoyal.kitty.window.434         })\nnet.kovidgoyal.kitty.window.434 ]\nnet.kovidgoyal.kitty.window.434 AXCloseButton: AXUIElement {\nnet.kovidgoyal.kitty.window.434      AXRole: Optional(AXButton)\nnet.kovidgoyal.kitty.window.434      AXTitle: nil\nnet.kovidgoyal.kitty.window.434      AXSubrole: Optional(AXCloseButton)\nnet.kovidgoyal.kitty.window.434      AXEnabled: Optional(1)\nnet.kovidgoyal.kitty.window.434      AXParent: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXTopLevelUIElement: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXWindow: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      Ignored: AXFrame, AXSize, AXFocused, AXHelp, AXPosition, AXRoleDescription, AXEdited\nnet.kovidgoyal.kitty.window.434 }\nnet.kovidgoyal.kitty.window.434 AXMain: Optional(1)\nnet.kovidgoyal.kitty.window.434 AXActivationPoint: Optional(\u003cAXValue 0x600001c92550\u003e {value = x:10.000000 y:48.000000 type = kAXValueCGPointType})\nnet.kovidgoyal.kitty.window.434 AXFullScreenButton: AXUIElement {\nnet.kovidgoyal.kitty.window.434      AXRole: Optional(AXButton)\nnet.kovidgoyal.kitty.window.434      AXTitle: nil\nnet.kovidgoyal.kitty.window.434      AXSubrole: Optional(AXFullScreenButton)\nnet.kovidgoyal.kitty.window.434      AXEnabled: Optional(1)\nnet.kovidgoyal.kitty.window.434      AXParent: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXTopLevelUIElement: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXWindow: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      Ignored: AXFrame, AXSize, AXFocused, AXChildren, AXHelp, AXPosition, AXRoleDescription\nnet.kovidgoyal.kitty.window.434 }\nnet.kovidgoyal.kitty.window.434 AXProxy: nil\nnet.kovidgoyal.kitty.window.434 AXDefaultButton: nil\nnet.kovidgoyal.kitty.window.434 AXMinimized: Optional(0)\nnet.kovidgoyal.kitty.window.434 AXParent: Optional(\u003cAXUIElement Application 0x600001c92550\u003e {pid=5125})\nnet.kovidgoyal.kitty.window.434 AXTitleUIElement: nil\nnet.kovidgoyal.kitty.window.434 AXCancelButton: nil\nnet.kovidgoyal.kitty.window.434 AXModal: Optional(0)\nnet.kovidgoyal.kitty.window.434 AXZoomButton: AXUIElement {\nnet.kovidgoyal.kitty.window.434      AXRole: Optional(AXButton)\nnet.kovidgoyal.kitty.window.434      AXTitle: nil\nnet.kovidgoyal.kitty.window.434      AXSubrole: Optional(AXFullScreenButton)\nnet.kovidgoyal.kitty.window.434      AXEnabled: Optional(1)\nnet.kovidgoyal.kitty.window.434      AXParent: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXTopLevelUIElement: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      AXWindow: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty.window.434      Ignored: AXFrame, AXSize, AXFocused, AXChildren, AXHelp, AXPosition, AXRoleDescription\nnet.kovidgoyal.kitty.window.434 }\nnet.kovidgoyal.kitty.window.434 AXSize: Optional(\u003cAXValue 0x600001c92550\u003e {value = w:1496.000000 h:932.000000 type = kAXValueCGSizeType})\nnet.kovidgoyal.kitty.window.434 AXToolbarButton: nil\nnet.kovidgoyal.kitty.window.434 Ignored: AXChildrenInNavigationOrder, AXChildren, AXRoleDescription\nnet.kovidgoyal.kitty            AXRole: Optional(AXApplication)\nnet.kovidgoyal.kitty            AXTitle: Optional(kitty)\nnet.kovidgoyal.kitty            AXFunctionRowTopLevelElements: [\nnet.kovidgoyal.kitty            ]\nnet.kovidgoyal.kitty            AXFrame: nil\nnet.kovidgoyal.kitty            AXFocusedUIElement: AXUIElement(windowId=434, title=nil, role=\"AXTextArea\", subrole=nil)\nnet.kovidgoyal.kitty            AXFrontmost: Optional(1)\nnet.kovidgoyal.kitty            AXExtrasMenuBar: nil\nnet.kovidgoyal.kitty            AXMainWindow: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty            AXFocusedWindow: AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty            AXMenuBar: Optional(\u003cAXUIElement 0x600001c47f00\u003e {pid=5125})\nnet.kovidgoyal.kitty            AXWindows: [\nnet.kovidgoyal.kitty                AXUIElement(windowId=434, title=\"aerospace debug-windows\", role=\"AXWindow\", subrole=\"AXStandardWindow\")\nnet.kovidgoyal.kitty            ]\nnet.kovidgoyal.kitty            AXSize: nil\nnet.kovidgoyal.kitty            AXPosition: nil\nnet.kovidgoyal.kitty            Ignored: AXChildren, AXChildrenInNavigationOrder, AXEnhancedUserInterface, AXPreferredLanguage, AXRoleDescription, AXHidden\n\n!!! DISCLAIMER !!!\n!!! 'debug-windows' command is not stable API. Please don't rely on the command existence and output format !!!\n!!! The only intended use case is to report bugs about incorrect windows handling !!!\n\nDebug session finished\n```\n\n- Your config\n```\n# Start AeroSpace at login\nstart-at-login = true\n\n# You can use it to add commands that run after login to macOS user session.\n# 'start-at-login' needs to be 'true' for 'after-login-command' to work\n# Available commands: https://nikitabobko.github.io/AeroSpace/commands\nafter-login-command = []\n\n# You can use it to add commands that run after AeroSpace startup.\n# 'after-startup-command' is run after 'after-login-command'\n# Available commands : https://nikitabobko.github.io/AeroSpace/commands\nafter-startup-command = [\n    \"exec-and-forget /Applications/AutoRaise.app/Contents/MacOS/AutoRaise -delay 0 -focusDelay 1 -disableKey disabled\",\n]\n\n# Normalizations. See: https://nikitabobko.github.io/AeroSpace/guide#normalization\nenable-normalization-flatten-containers = true\nenable-normalization-opposite-orientation-for-nested-containers = true\n\n# See: https://nikitabobko.github.io/AeroSpace/guide#layouts\n# The 'accordion-padding' specifies the size of accordion padding\n# You can set 0 to disable the padding feature\naccordion-padding = 30\n\n# Possible values: tiles|accordion\ndefault-root-container-layout = 'tiles'\n\n# Possible values: horizontal|vertical|auto\n# 'auto' means: wide monitor (anything wider than high) gets horizontal orientation,\n#               tall monitor (anything higher than wide) gets vertical orientation\ndefault-root-container-orientation = 'auto'\n\n# Possible values: (qwerty|dvorak)\n# See https://nikitabobko.github.io/AeroSpace/guide#key-mapping\nkey-mapping.preset = 'qwerty'\n\n# Gaps between windows (inner-*) and between monitor edges (outer-*).\n# Possible values:\n# - Constant:     gaps.outer.top = 8\n# - Per monitor:  gaps.outer.top = [{ monitor.main = 16 }, { monitor.\"some-pattern\" = 32 }, 24]\n#                 In this example, 24 is a default value when there is no match.\n#                 Monitor pattern is the same as for 'workspace-to-monitor-force-assignment'.\n#                 See: https://nikitabobko.github.io/AeroSpace/guide#assign-workspaces-to-monitors\n[gaps]\ninner.horizontal = 2\ninner.vertical = 2\nouter.left = 0\nouter.bottom = 0\nouter.top = 0\nouter.right = 0\n\n# See https://nikitabobko.github.io/AeroSpace/guide#exec-env-vars\n[exec] # Again, you don't need to copy all config sections to your config.\ninherit-env-vars = true # If you don't touch \"exec\" section,\n[exec.env-vars] # it will fallback to \"default-config.toml\"\nPATH = '/opt/homebrew/bin:/opt/homebrew/sbin:${PATH}'\n\n# 'main' binding mode declaration\n# See: https://nikitabobko.github.io/AeroSpace/guide#binding-modes\n# 'main' binding mode must be always presented\n[mode.main.binding]\n\n# All possible keys:\n# - Letters.        a, b, c, ..., z\n# - Numbers.        0, 1, 2, ..., 9\n# - Keypad numbers. keypad0, keypad1, keypad2, ..., keypad9\n# - F-keys.         f1, f2, ..., f20\n# - Special keys.   minus, equal, period, comma, slash, backslash, quote, semicolon, backtick,\n#                   leftSquareBracket, rightSquareBracket, space, enter, esc, backspace, tab\n# - Keypad special. keypadClear, keypadDecimalMark, keypadDivide, keypadEnter, keypadEqual,\n#                   keypadMinus, keypadMultiply, keypadPlus\n# - Arrows.         left, down, up, right\n# All possible modifiers: cmd, alt, ctrl, shift\n# All possible commands: https://nikitabobko.github.io/AeroSpace/commands\n\n# System Binds\nalt-q = 'close --quit-if-last-window'\n\n# Application Binds\nalt-t = 'exec-and-forget kitty'                                     # Terminal\nalt-f = 'exec-and-forget open -n \"/Applications/Google Chrome.app\"' # Browser\nalt-r = 'exec-and-forget open .'                                    # Finder\nalt-c = \"exec-and-forget zed\"\n\n# Layout Binds\n# See: https://nikitabobko.github.io/AeroSpace/commands#layout\n# alt-slash = 'layout tiles horizontal vertical'\n# alt-comma = 'layout accordion horizontal vertical'\nalt-o = \"layout floating tiling\"\nalt-u = 'layout tiles horizontal vertical'\nalt-left = \"move left\"\nalt-right = \"move right\"\nalt-up = \"move up\"\nalt-down = \"move left\"\n\n# See: https://nikitabobko.github.io/AeroSpace/commands#focus\nalt-j = \"move left\"\nalt-l = \"move right\"\nalt-i = \"move up\"\nalt-k = \"move down\"\n\n# See: https://nikitabobko.github.io/AeroSpace/commands#move\n# alt-shift-h = 'move left'\n# alt-shift-j = 'move down'\n# alt-shift-k = 'move up'\n# alt-shift-l = 'move right'\n\n# See: https://nikitabobko.github.io/AeroSpace/commands#resize\n# alt-shift-minus = 'resize smart -50'\n# alt-shift-equal = 'resize smart +50'\n\n# See: https://nikitabobko.github.io/AeroSpace/commands#workspace\nalt-1 = 'workspace 1'\nalt-2 = 'workspace 2'\nalt-3 = 'workspace 3'\nalt-4 = 'workspace 4'\nalt-5 = 'workspace 5'\nalt-6 = 'workspace 6'\nalt-s = 'workspace s'\n\nalt-a = 'workspace prev'\nalt-d = 'workspace next'\n\n# See: https://nikitabobko.github.io/AeroSpace/commands#move-node-to-workspace\ncmd-alt-1 = 'move-node-to-workspace 1'\ncmd-alt-2 = 'move-node-to-workspace 2'\ncmd-alt-3 = 'move-node-to-workspace 3'\ncmd-alt-4 = 'move-node-to-workspace 4'\ncmd-alt-5 = 'move-node-to-workspace 5'\ncmd-alt-6 = 'move-node-to-workspace 6'\n\n# Move relative and follow window.\ncmd-alt-a = [\"move-node-to-workspace prev\", 'workspace prev']\ncmd-alt-d = [\"move-node-to-workspace next\", 'workspace next']\n\n# See: https:nikitabobko.github.o/AeroSpace/commands#mode\n# alt-shift-semicolon = 'mode service'\n\n# 'service' binding mode declaration.\n# See: https://nikitabobko.github.io/AeroSpace/guide#binding-modes\n[mode.service.binding]\nesc = ['reload-config', 'mode main']\nr = ['flatten-workspace-tree', 'mode main'] # reset layout\n#s = ['layout sticky tiling', 'mode main'] # sticky is not yet supported https://github.com/nikitabobko/AeroSpace/issues/2\nf = [\n    'layout floating tiling',\n    'mode main',\n] # Toggle between floating and tiling layout\nbackspace = ['close-all-windows-but-current', 'mode main']\n\nalt-shift-h = ['join-with left', 'mode main']\nalt-shift-j = ['join-with down', 'mode main']\nalt-shift-k = ['join-with up', 'mode main']\nalt-shift-l = ['join-with right', 'mode main']\n\n```\n\n## Checklist\n\n\u003c!-- Please fill in the checklist. You must have strong reasons not to do so --\u003e\n\n- [x] I've searched for duplicates. My search queries were (please don't forget to search in closed issues too):\n  - close\n  - kitty\n  - decorators\n  - decorations\n- [x] I've read the documentation https://nikitabobko.github.io/AeroSpace/guide \u0026 https://nikitabobko.github.io/AeroSpace/commands\n- [x] I've searched in the documentation. My search queries were:\n  - close\n  - decorators\n\n```\naerospace CLI client version: 0.14.2-Beta 0cb8dbdfc5ee73b8cbc200f175f467ebead55201\nAeroSpace.app server version: 0.14.2-Beta 0cb8dbdfc5ee73b8cbc200f175f467ebead55201\n```","files":null},{"type":2,"timestamp":1726439097,"nonce":"omR8hEFYX0ojmPmTTz9Eo/FKmaI=","metadata":{"github-id":"RTE_lADOJl1IZM6WooK1zwAAAANSP8kA"},"title":"Workspace position reset when using no decorations with kitty on \"aerospace close\"","was":"Workspace position reset for apps fully killed via \"aerospace close\""},{"type":2,"timestamp":1726439205,"nonce":"mdGwXZ/+LhZdwblJ9T3Rws4ooSQ=","metadata":{"github-id":"RTE_lADOJl1IZM6WooK1zwAAAANSP9cm"},"title":"Workspace position reset for kitty on \"aerospace close\"","was":"Workspace position reset when using no decorations with kitty on \"aerospace close\""},{"type":3,"timestamp":1726439312,"nonce":"hyRkAwjFWWk2PRacdsYnviDlfHI=","metadata":{"github-id":"IC_kwDOJl1IZM6MLdal","github-url":"https://github.com/nikitabobko/AeroSpace/issues/512#issuecomment-2351814309"},"message":"I just tried enabling decorators again actually and the issue still persists, this does not affect for instance chrome.","files":null},{"type":6,"timestamp":1726439589,"nonce":"JCzr0hXwVJh7FQnLVjGjhM3t07E=","metadata":{"github-id":"UCE_lALOJl1IZM6MLdalzk_EBCE"},"target":"dd96f8277ce700a145ae2971218589dec0a95a0eeeb76ddac71f45a015ed405a","message":"I just tried enabling decorators again actually and the issue still persists, this does not affect for instance chrome.\n\nThe cause here seems to be the process in the space being terminated, so \n```\nalt-q = 'exec-and-forget aerospace close --quit-if-last-window'\n```\nor\n```\nalt-q = 'close --quit-if-last-window'\n```\ncauses this to happen on most apps.\n\nThe difference in those two binds is, the first one does not update the current space on the screen until you try and move spaces again, the 2nd one automatically moves you to the next space with a window.\n\nI think the intended behavior here should be close the app and keep the user on the blank space.","files":null},{"type":6,"timestamp":1726439623,"nonce":"AtbXm4Nq1WipaaiSjebJd6Fbwvo=","metadata":{"github-id":"UCE_lALOJl1IZM6MLdalzk_EBMY"},"target":"dd96f8277ce700a145ae2971218589dec0a95a0eeeb76ddac71f45a015ed405a","message":"The cause here seems to be the process in the space being terminated, so \n```\nalt-q = 'exec-and-forget aerospace close --quit-if-last-window'\n```\nor\n```\nalt-q = 'close --quit-if-last-window'\n```\ncauses this to happen on most apps.\n\nThe difference in those two binds is, the first one does not update the current space on the screen until you try and move spaces again, the 2nd one automatically moves you to the next space with a window.\n\nI think the intended behavior here should be close the app and keep the user on the blank space.","files":null},{"type":2,"timestamp":1726439658,"nonce":"Iq8ehLlX0qZG5loxgGa4p4plw1Y=","metadata":{"github-id":"RTE_lADOJl1IZM6WooK1zwAAAANSQAiH"},"title":"Workspace position reset for apps fully killed via \"aerospace close\"","was":"Workspace position reset for kitty on \"aerospace close\""}]}