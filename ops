{"author":{"id":"5001639c26c1470b44ac51ca708d6ee06f5ea5fa130c3f5f4646b792a005c6e9"},"ops":[{"type":1,"timestamp":1729384987,"nonce":"ZwKp04BrpJ3sh9HqLzioEBxFFTA=","metadata":{"github-id":"I_kwDOJl1IZM6a9YHd","github-url":"https://github.com/nikitabobko/AeroSpace/issues/604","origin":"github"},"title":"Long delay (30+ seconds) and high CPU utilitatation when AeroSpace resets workspaces etc. after wake from sleep or add/remove display","message":"(This is not a v15.x regression -- same problem existed in v14.x)\n\nI have a MacBook Pro M1 Max with 32GB. I run tons of apps, the heaviest being Firefox, with perhaps 15-20 windows and 120+ tabs. Memory pressure can increase t0 50-65%+ but performance is fine normally. I operate with 3 monitors. \n\nWhen I've not rebooted for a few days, AeroSpace tends to get laggy (though this usually corresponds to high memory pressure also so ...). But performance is extremely slow in two specific situations:\n\n1. Plugging in an additional display.\n2. Unplugging a display.\n3. Especially, waking up the MacBook after it has been in sleep mode, which is basically a superset of adding/removing a display -- AeroSpace seems to be resetting everything. This process can take 30-60 seconds when the system has been running for several days.\n\nWhat I see during the wake up process:\n\n- Windows / workspaces switching from one display to another\n- AeroSpace menu not displaying at all on a monitor; or displaying a different display-workspace config on each display, with some displays not showing one or two displays but not all three\n- Long delays when nothing visible happens\n- CPU utilization hitting near 100% (pretty heavy on an M1 Max)\n\nEventually (30-60 seconds), the correct workspaces and AeroPress menu state appears on all 3 displays. Note that performance is much better if my system was just rebooted and memory pressure is low.\n\n\u003c!--\nConsider including in bug reports:\n- `aerospace debug-windows` output if applicable\n- Screenshots of problematic windows if applicable\n- Videos of problematic windows if applicable\n- Your config\n--\u003e\n\n## Checklist\n\n\u003c!-- Please fill in the checklist. You must have strong reasons not to do so --\u003e\n\n- [x] I've searched for duplicates. My search queries were (please don't forget to search in closed issues too):\n  - performance\n  - wake\n  - sleep\n- [x] I've read the guide https://nikitabobko.github.io/AeroSpace/guide\n- [ ] I've searched in the documentation (https://nikitabobko.github.io/AeroSpace/guide \u0026 https://nikitabobko.github.io/AeroSpace/commands). My search queries were:\n  - performance\n  - wake\n  - sleep\n\n```\naerospace CLI client version: 0.15.2-Beta b6cf82771f245ab7349a93baf8709e171537ff58\nAeroSpace.app server version: 0.15.2-Beta b6cf82771f245ab7349a93baf8709e171537ff58\n```","files":null}]}