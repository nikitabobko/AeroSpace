{"author":{"id":"8ea171102f11dd3ec7581bcdc8b9f6aa09d453304504dea4e39df77f93199af9"},"ops":[{"type":1,"timestamp":1738659395,"nonce":"/ap/ZMDO8EhEi1ZuFQnUH7ngOjk=","metadata":{"github-id":"I_kwDOJl1IZM6opxtf","github-url":"https://github.com/nikitabobko/AeroSpace/issues/1059","origin":"github"},"title":"Crash when ejecting USB drive on macOS Sonoma 14.7.3","message":"I upgraded to macOS Sonoma 14.7.3 yesterday and experienced my first Aerospace crash today.  I'm not sure if it's just a coincidence that it crashed the day after I upgraded macOS, but I just wanted to mention it.\n\nAnyways, my normal morning routine is: I plug in my USB drive, run a TimeMachine backup, eject the USB drive.  I eject the drive by clicking the eject button next to the volume in the Finder window, which pops up a dialog asking me if I want to eject just the selected volume or all volumes on the external drive (this particular drive is formatted w/ two separate volumes, one for TimeMachine backups and another for general storage).  I click the \"All Volumes\" button, the dialog box disappears, both volumes disappear from the left sidebar in Finder a few seconds later, and then I unplug the USB drive.  This has worked flawlessly with Aerospace for months, until today.\n\nI believe that is what triggered the crash, but I'm not 100% sure.  Honestly, after I clicked the \"Eject all volumes\" button on the modal Finder dialog I looked away for a few seconds.  When I looked back at my screen the Console window had popped up with the Aerospace stack trace.\n\nHere is the full crash log from Console:\n\n##### AeroSpace Runtime Error #####\n\nPlease report to:\n    https://github.com/nikitabobko/AeroSpace/issues/new\n    Please describe what you did to trigger this error\n\nMessage: Windows always have parent\nVersion: 0.16.2-Beta\nGit hash: 21336ad382539b35fdc94b4fbd55408e10b101f8\nCoordinate: /Users/bobko/a/AeroSpace/Sources/AppBundle/tree/Window.swift:7:72 parent\nrecursionDetectorDuringFailure: false\ncli: false\nDisplays have separate spaces: false\n\nStacktrace:\n0   AeroSpace                           0x0000000102b17104 $s6Common6errorT_4file4line6column8functionxSS_SSS2iSStlF + 1076\n1   AeroSpace                           0x00000001029b7a8c $s9AppBundle6WindowC6parentAA21NonLeafTreeNodeObject_pvg + 140\n2   AeroSpace                           0x00000001029b6a7c $s9AppBundle8TreeNodeC13nodeWorkspaceAA0F0CSgvg + 64\n3   AeroSpace                           0x0000000102993424 $s9AppBundle16updateFocusCacheyyAA6WindowCSgF + 68\n4   AeroSpace                           0x00000001029956e8 $s9AppBundle14refreshSession26screenIsDefinitelyUnlocked7startup4bodyxSb_SbxyXEtlFyt_Tg503$s9a32Bundle16refreshAndLayout26screenfG31Unlocked7startupySb_SbtFyyXEfU_Tf1nnnc_n + 412\n5   AeroSpace                           0x000000010293bd14 $s9AppBundle14GlobalObserverC7onNotif33_F1205CFDC13498282252A689C79131F6LLyy10Foundation12NotificationVFZTf4nd_n + 380\n6   AeroSpace                           0x000000010293afec $s10Foundation12NotificationVIeghn_So14NSNotificationCIeyBhy_TR + 116\n7   CoreFoundation                      0x0000000198c3a110 __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 128\n8   CoreFoundation                      0x0000000198cce3b8 ___CFXRegistrationPost_block_invoke + 88\n9   CoreFoundation                      0x0000000198cce300 _CFXRegistrationPost + 440\n10  CoreFoundation                      0x0000000198c08658 _CFXNotificationPost + 768\n11  Foundation                          0x0000000199d262c4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 88\n12  AppKit                              0x000000019c643f24 applicationStatusSubsystemCallback + 728\n13  LaunchServices                      0x00000001990c46c0 ___LSScheduleNotificationFunction_block_invoke_2 + 52\n14  CoreFoundation                      0x0000000198c45050 __CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK__ + 28\n15  CoreFoundation                      0x0000000198c44f64 __CFRunLoopDoBlocks + 356\n16  CoreFoundation                      0x0000000198c443f4 __CFRunLoopRun + 2440\n17  CoreFoundation                      0x0000000198c43414 CFRunLoopRunSpecific + 608\n18  HIToolbox                           0x00000001a33f019c RunCurrentEventLoopInMode + 292\n19  HIToolbox                           0x00000001a33effd8 ReceiveNextEventCommon + 648\n20  HIToolbox                           0x00000001a33efd30 _BlockUntilNextEventMatchingListInModeWithFilter + 76\n21  AppKit                              0x000000019c4a4cc8 _DPSNextEvent + 660\n22  AppKit                              0x000000019cc9b4d0 -[NSApplication(NSEventRouting) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 700\n23  AppKit                              0x000000019c497ffc -[NSApplication run] + 476\n24  AppKit                              0x000000019c46f240 NSApplicationMain + 880\n25  SwiftUI                             0x00000001c46423b8 OUTLINED_FUNCTION_12 + 13968\n26  SwiftUI                             0x00000001c4dabddc OUTLINED_FUNCTION_3 + 196\n27  SwiftUI                             0x00000001c51a6e0c OUTLINED_FUNCTION_0 + 140\n28  AeroSpace                           0x00000001029390b8 main + 36\n29  dyld                                0x00000001987db154 start + 2476","files":null}]}