{"author":{"id":"2d08e4816aca0a07db9878f126b0e7f6d6f1362eb9bc4804be6b33ff8d0a19ec"},"ops":[{"type":1,"timestamp":1724322009,"nonce":"JVtkJ9RJxBeJfVc8iXOQuBf9T3A=","metadata":{"github-id":"I_kwDOJl1IZM6T2AJ7","github-url":"https://github.com/nikitabobko/AeroSpace/issues/445","origin":"github"},"title":"Fight with  Ghost windows. Actively check for  closed windows on every \"refresh session\"","message":"macOS AX callbacks are unreliable. Sometimes windows can close but the `kAXUIElementDestroyedNotification` callback is not invoked (e.g. if user quickly closes several windows in a row)\n\nAeroSpace already checks for new appeared windows on every \"refresh session\" to fight unreliable `kAXWindowCreatedNotification` callback.\n\nThe only window state that AeroSpace doesn't actively check for is when the window is closed. Currently AeroSpace \"forgets\" about windows only if `kAXUIElementDestroyedNotification` is invoked for them.\n\nThe reason for it is because I didn't find yet a reliable way to detect that `AXUIElement` is no longer valid. One approach that I tried before is to check that `_AXUIElementGetWindow` returns `nil`. Unfortunately, `_AXUIElementGetWindow` returns `nil` for every `AXUIElement` when the screen is locked","files":null}]}