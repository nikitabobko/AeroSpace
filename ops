{"author":{"id":"096001d47ced6dede392f6829ca2dbcc29387988101cbe832dc6e6953ba70d94"},"ops":[{"type":1,"timestamp":1733770339,"nonce":"/td/xVRo2ZTO1KN/uGEOs3DApG0=","metadata":{"github-id":"I_kwDOJl1IZM6imXlM","github-url":"https://github.com/nikitabobko/AeroSpace/issues/834","origin":"github"},"title":"Aerospace crashes when opening System Preferences","message":"I know this is probably a duplicate on many other recent reports but I've been having a number of similar crashes recently.  Note that this is with Aerospace version  0.16.2-Beta 21336ad382539b35fdc94b4fbd55408e10b101f8 which seems to be the latest available on homebrew.  I've not seen a real pattern in the crashes.  In this case, I was just using Raycast to open the System Preferences app and as soon as that window opened, aerospace crashed.\n\n-------------------------------------\nTranslated Report (Full Report Below)\n-------------------------------------\n\nProcess:               AeroSpace [94253]\nPath:                  /Applications/AeroSpace.app/Contents/MacOS/AeroSpace\nIdentifier:            bobko.aerospace\nVersion:               0.16.2-Beta (???)\nCode Type:             ARM-64 (Native)\nParent Process:        launchd [1]\nUser ID:               504\n\nDate/Time:             2024-12-09 10:37:36.2145 -0800\nOS Version:            macOS 15.1.1 (24B91)\nReport Version:        12\nAnonymous UUID:        DA8E2CCD-0034-DCCD-E0F8-9D0A7ED264F2\n\n\nTime Awake Since Boot: 1700000 seconds\n\nSystem Integrity Protection: enabled\n\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\n\nException Type:        EXC_BREAKPOINT (SIGTRAP)\nException Codes:       0x0000000000000001, 0x00000001aaff6a08\n\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\nTerminating Process:   exc handler [94253]\n\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\n0   libswiftCore.dylib            \t       0x1aaff6a08 _assertionFailure(_:_:file:line:flags:) + 268\n1   AeroSpace                     \t       0x10283b844 errorT\u003cA\u003e(_:file:line:column:function:) + 1248\n2   AeroSpace                     \t       0x1026eb324 restoreClosedWindowsCacheIfNeeded(newlyDetectedWindow:) + 2548\n3   AeroSpace                     \t       0x1026d8c28 specialized static MacWindow.get(app:axWindow:startup:) + 1648\n4   AeroSpace                     \t       0x1026d4fa0 specialized Sequence.compactMap\u003cA\u003e(_:) + 248\n5   AeroSpace                     \t       0x1026cd7ac MacApp.detectNewWindowsAndGetAll(startup:) + 256\n6   AeroSpace                     \t       0x1026bd5d0 detectNewWindowsAndAttachThemToWorkspaces(startup:) + 384\n7   AeroSpace                     \t       0x1026ba9c4 specialized refreshSession\u003cA\u003e(screenIsDefinitelyUnlocked:startup:forceFocus:body:) + 752\n8   AeroSpace                     \t       0x1026d5410 MacWindow.garbageCollect(skipClosedWindowsCache:) + 712\n9   AeroSpace                     \t       0x1026bf9f8 gcWindows() + 500\n10  AeroSpace                     \t       0x1026bd05c refreshModel() + 388\n11  AeroSpace                     \t       0x1026bafb8 specialized refreshSession\u003cA\u003e(screenIsDefinitelyUnlocked:startup:forceFocus:body:) + 872\n12  AeroSpace                     \t       0x10265f824 specialized static GlobalObserver.onNotif(_:) + 384\n13  AeroSpace                     \t       0x10265eb08 thunk for @escaping @callee_guaranteed @Sendable (@in_guaranteed Notification) -\u003e () + 116\n14  CoreFoundation                \t       0x19a43e7ec __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 128\n15  CoreFoundation                \t       0x19a4cf66c ___CFXRegistrationPost_block_invoke + 88\n16  CoreFoundation                \t       0x19a4cf5b4 _CFXRegistrationPost + 436\n17  CoreFoundation                \t       0x19a40d43c _CFXNotificationPost + 732\n18  Foundation                    \t       0x19b5b5b14 -[NSNotificationCenter postNotificationName:object:userInfo:] + 88\n19  AppKit                        \t       0x19e10d668 applicationStatusSubsystemCallback + 728\n20  LaunchServices                \t       0x19a8e3e84 ___LSScheduleNotificationFunction_block_invoke_2 + 52\n21  CoreFoundation                \t       0x19a4498c0 __CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK__ + 28\n22  CoreFoundation                \t       0x19a4497d0 __CFRunLoopDoBlocks + 356\n23  CoreFoundation                \t       0x19a4485b8 __CFRunLoopRun + 824\n24  CoreFoundation                \t       0x19a447bc4 CFRunLoopRunSpecific + 588\n25  HIToolbox                     \t       0x1a58b7f64 RunCurrentEventLoopInMode + 292\n26  HIToolbox                     \t       0x1a58bdd54 ReceiveNextEventCommon + 636\n27  HIToolbox                     \t       0x1a58bdeb8 _BlockUntilNextEventMatchingListInModeWithFilter + 76\n28  AppKit                        \t       0x19df73a08 _DPSNextEvent + 660\n29  AppKit                        \t       0x19e8b3e0c -[NSApplication(NSEventRouting) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 688\n30  AppKit                        \t       0x19df66ae0 -[NSApplication run] + 480\n31  AppKit                        \t       0x19df3d364 NSApplicationMain + 888\n32  SwiftUI                       \t       0x1c85ed340 specialized runApp(_:) + 160\n33  SwiftUI                       \t       0x1c8a5dee4 runApp\u003cA\u003e(_:) + 84\n34  SwiftUI                       \t       0x1c8dd6f24 static App.main() + 224\n35  AeroSpace                     \t       0x10265d3ec main + 36\n36  dyld                          \t       0x199fe0274 start + 2840\n\nThread 1::  Dispatch queue: com.apple.root.default-qos\n0   libsystem_kernel.dylib        \t       0x19a32a6e4 __accept + 8\n1   AeroSpace                     \t       0x1028bf810 Socket.acceptClientConnection(invokeDelegate:) + 452\n2   AeroSpace                     \t       0x1026c80ec closure #3 in startUnixSocketServer() + 148\n3   AeroSpace                     \t       0x1026ca8bc thunk for @escaping @callee_guaranteed @Sendable () -\u003e () + 28\n4   libdispatch.dylib             \t       0x19a1ae8f8 _dispatch_call_block_and_release + 32\n5   libdispatch.dylib             \t       0x19a1b0658 _dispatch_client_callout + 20\n6   libdispatch.dylib             \t       0x19a1b37a0 _dispatch_queue_override_invoke + 916\n7   libdispatch.dylib             \t       0x19a1c2314 _dispatch_root_queue_drain + 392\n8   libdispatch.dylib             \t       0x19a1c2b20 _dispatch_worker_thread2 + 156\n9   libsystem_pthread.dylib       \t       0x19a35f39c _pthread_wqthread + 228\n10  libsystem_pthread.dylib       \t       0x19a35e0f0 start_wqthread + 8\n\nThread 2:: com.apple.NSEventThread\n0   libsystem_kernel.dylib        \t       0x19a321e34 mach_msg2_trap + 8\n1   libsystem_kernel.dylib        \t       0x19a3345d0 mach_msg2_internal + 80\n2   libsystem_kernel.dylib        \t       0x19a32a9d8 mach_msg_overwrite + 480\n3   libsystem_kernel.dylib        \t       0x19a32217c mach_msg + 24\n4   CoreFoundation                \t       0x19a449edc __CFRunLoopServiceMachPort + 160\n5   CoreFoundation                \t       0x19a44873c __CFRunLoopRun + 1212\n6   CoreFoundation                \t       0x19a447bc4 CFRunLoopRunSpecific + 588\n7   AppKit                        \t       0x19e098b8c _NSEventThread + 148\n8   libsystem_pthread.dylib       \t       0x19a3632e4 _pthread_start + 136\n9   libsystem_pthread.dylib       \t       0x19a35e0fc thread_start + 8\n\nThread 3:\n0   libsystem_pthread.dylib       \t       0x19a35e0e8 start_wqthread + 0\n\n\nThread 0 crashed with ARM Thread State (64-bit):\n    x0: 0x000000012c07a808   x1: 0x0000000200000003   x2: 0x000000012b8c5200   x3: 0x0000000000000004\n    x4: 0x0000000000000600   x5: 0x0000000000000013   x6: 0x0000000000000600   x7: 0x0000000000000000\n    x8: 0xfffffffe00000000   x9: 0x0000000200000003  x10: 0x0000000000000003  x11: 0x000000000074f600\n   x12: 0x000000012b800028  x13: 0x00000000ffff8004  x14: 0x00000000000005e8  x15: 0x00000000ffff7dff\n   x16: 0x000000012b8081f8  x17: 0x000000019a18f290  x18: 0x0000000000000000  x19: 0x000000010295b090\n   x20: 0x000000012c07a800  x21: 0x0000000000000000  x22: 0x000000000000000b  x23: 0x0000000000000017\n   x24: 0x000000000000002d  x25: 0x00000001029543e0  x26: 0xf0000000000013b7  x27: 0x0000000000000000\n   x28: 0xd000000000000017   fp: 0x000000016d7a4d40   lr: 0x00000001aaff6a08\n    sp: 0x000000016d7a4c70   pc: 0x00000001aaff6a08 cpsr: 0x60001000\n   far: 0x0000000000000000  esr: 0xf2000001 (Breakpoint) brk 1\n\nBinary Images:\n       0x102658000 -        0x102977fff bobko.aerospace (0.16.2-Beta) \u003cf8749a76-9a17-3c0e-9f1c-18b26ef753d5\u003e /Applications/AeroSpace.app/Contents/MacOS/AeroSpace\n       0x10857c000 -        0x108587fff libobjc-trampolines.dylib (*) \u003cf1242604-dcb7-30a9-a19a-182991e6e645\u003e /usr/lib/libobjc-trampolines.dylib\n       0x10a18c000 -        0x10a82bfff com.apple.AGXMetalG13X (322.10) \u003ce863b7d4-d308-3f26-a59f-9dc04134c15e\u003e /System/Library/Extensions/AGXMetalG13X.bundle/Contents/MacOS/AGXMetalG13X\n       0x1aafbe000 -        0x1ab564fff libswiftCore.dylib (*) \u003c53497bdd-8c93-3dc1-9ae9-82f27e47fb0a\u003e /usr/lib/swift/libswiftCore.dylib\n       0x19a3cc000 -        0x19a8c0fff com.apple.CoreFoundation (6.9) \u003cae4610f8-7c5c-3484-858e-cae7457d206e\u003e /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation\n       0x19b5ac000 -        0x19c3ebfff com.apple.Foundation (6.9) \u003c9b5ba00d-2241-342d-9949-f2f517d6989e\u003e /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation\n       0x19df39000 -        0x19f334fff com.apple.AppKit (6.9) \u003c49d8b1b6-0ea8-36ad-89fd-a41acf00a742\u003e /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit\n       0x19a8c1000 -        0x19ab97fff com.apple.LaunchServices (1141.1) \u003caabd792d-cc4d-372f-a17e-ad3050501575\u003e /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices\n       0x1a57ac000 -        0x1a5ab3fff com.apple.HIToolbox (2.1.1) \u003c738685cb-aca1-3dfe-91c5-192bab97a042\u003e /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox\n       0x1c85a1000 -        0x1c9d63fff com.apple.SwiftUI (6.1.19.2) \u003c766fb524-278b-3c0c-9c63-2386ec6b2bfd\u003e /System/Library/Frameworks/SwiftUI.framework/Versions/A/SwiftUI\n       0x199fda000 -        0x19a05c7b3 dyld (*) \u003c6beafde4-b011-3e47-8aae-4d7b6e4bb7e8\u003e /usr/lib/dyld\n               0x0 - 0xffffffffffffffff ??? (*) \u003c00000000-0000-0000-0000-000000000000\u003e ???\n       0x19a16b000 -        0x19a1abff7 libsystem_malloc.dylib (*) \u003c9d2c8296-72fc-32f0-a2af-ca91f77dd5a4\u003e /usr/lib/system/libsystem_malloc.dylib\n       0x19a321000 -        0x19a35bff7 libsystem_kernel.dylib (*) \u003c9fea25a4-e8ca-3f3d-901c-a53ff2bc7217\u003e /usr/lib/system/libsystem_kernel.dylib\n       0x19a1ac000 -        0x19a1f2fff libdispatch.dylib (*) \u003c9ea577db-73c2-39d8-9fc0-544fa595a142\u003e /usr/lib/system/libdispatch.dylib\n       0x19a35c000 -        0x19a368fff libsystem_pthread.dylib (*) \u003c3b8268be-4e02-3b4a-8b41-baed2bbaacff\u003e /usr/lib/system/libsystem_pthread.dylib\n\nExternal Modification Summary:\n  Calls made by other processes targeting this process:\n    task_for_pid: 448\n    thread_create: 0\n    thread_set_state: 0\n  Calls made by this process:\n    task_for_pid: 0\n    thread_create: 0\n    thread_set_state: 0\n  Calls made by all processes on this machine:\n    task_for_pid: 470\n    thread_create: 0\n    thread_set_state: 0\n\nVM Region Summary:\nReadOnly portion of Libraries: Total=1.3G resident=0K(0%) swapped_out_or_unallocated=1.3G(100%)\nWritable regions: Total=888.0M written=546K(0%) resident=546K(0%) swapped_out=0K(0%) unallocated=887.5M(100%)\n\n                                VIRTUAL   REGION \nREGION TYPE                        SIZE    COUNT (non-coalesced) \n===========                     =======  ======= \nAccelerate framework               256K        2 \nActivity Tracing                   256K        1 \nAttributeGraph Data               1024K        1 \nCG image                            96K        5 \nColorSync                          512K       26 \nCoreAnimation                       64K        3 \nCoreGraphics                        64K        4 \nCoreUI image data                   64K        1 \nFoundation                          16K        1 \nKernel Alloc Once                   32K        1 \nMALLOC                           875.2M       79 \nMALLOC guard page                  384K       24 \nMach message                       576K        6 \nSTACK GUARD                       56.1M        4 \nStack                             9808K        4 \nVM_ALLOCATE                        160K       10 \n__AUTH                            3298K      430 \n__AUTH_CONST                      47.1M      633 \n__CTF                               824        1 \n__DATA                            16.7M      613 \n__DATA_CONST                      18.7M      640 \n__DATA_DIRTY                      1736K      204 \n__FONT_DATA                        2352        1 \n__INFO_FILTER                         8        1 \n__LINKEDIT                       590.4M        4 \n__OBJC_RW                         2354K        1 \n__TEXT                           761.9M      658 \n__TPRO_CONST                       272K        2 \nmapped file                      230.0M       27 \nowned unmapped memory              336K        1 \npage table in kernel               546K        1 \nshared memory                      864K       12 \n===========                     =======  ======= \nTOTAL                              2.6G     3401","files":null}]}