{"author":{"id":"2d08e4816aca0a07db9878f126b0e7f6d6f1362eb9bc4804be6b33ff8d0a19ec"},"ops":[{"type":3,"timestamp":1728407664,"nonce":"1voR+XQ2YXjJXpsd/+U79oD2VRc=","metadata":{"github-id":"IC_kwDOJl1IZM6PE2eL","github-url":"https://github.com/nikitabobko/AeroSpace/issues/571#issuecomment-2400413579"},"message":"I'm aware of this problem. It's not just about external monitors. Whenever you close windows, AeroSpace tries hard to keep the currently focused workspace focused, but since AeroSpace also listens for focus changes from macOS side (to make things like cmd-tab work), macOS can \"steal\" focus from AeroSpace\n\nWhen you close windows there is a \"race condtion\" between AeroSpace trying to keep the currently focused workspace focused, and macOS who tries to focus the most \"recent window\" from macOS perspective\n\nHow to fix it? IDK","files":null},{"type":6,"timestamp":1728407876,"nonce":"HxwIM/zLLPxfS/qsAao51OTPFfU=","metadata":{"github-id":"UCE_lALOJl1IZM6PE2eLzlHH7sA"},"target":"30856dd83580df262cd3fffedbf94215fd187bed0525d0c9d0ee0d073212682f","message":"I'm aware of this problem. It's not just about external monitors. Whenever you close windows, AeroSpace tries hard to keep the currently focused workspace focused, but since AeroSpace also listens for focus changes from macOS side (to make things like cmd-tab work), macOS can \"steal\" focus from AeroSpace\n\nWhen you close windows there is a \"race condtion\" between AeroSpace trying to keep the currently focused workspace focused, and macOS who tries to focus the most \"recent window\" from macOS perspective\n\nThe order of callbacks coming from macOS is inconsistent. There are two events coming from macOS when you close windows: `kAXFocusedWindowChangedNotification` and `kAXUIElementDestroyedNotification` (when window is closed). If I remember it correctly, the events may come in whatever order.\n\nHow to fix the race condtion? IDK","files":null},{"type":6,"timestamp":1728407888,"nonce":"MK94crCHG0UARH26213pQi/aWN8=","metadata":{"github-id":"UCE_lALOJl1IZM6PE2eLzlHH8Bk"},"target":"30856dd83580df262cd3fffedbf94215fd187bed0525d0c9d0ee0d073212682f","message":"I'm aware of this problem. It's not just about external monitors. Whenever you close windows, AeroSpace tries hard to keep the currently focused workspace focused, but since AeroSpace also listens for focus changes from macOS side (to make things like cmd-tab work), macOS can \"steal\" focus from AeroSpace\n\nWhen you close windows there is a \"race condtion\" between AeroSpace trying to keep the currently focused workspace focused, and macOS who tries to focus the most \"recent window\" from macOS perspective\n\nThere are two events coming from macOS when you close windows: `kAXFocusedWindowChangedNotification` and `kAXUIElementDestroyedNotification` (when window is closed). If I remember it correctly, the events may come in whatever order.\n\nHow to fix the race condtion? IDK","files":null}]}