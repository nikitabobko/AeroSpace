{"author":{"id":"a7dd9ed5548c36d80abdd5a7f763d951d83b5487c7f29b53d2bef09f3b4e4ff6"},"ops":[{"type":3,"timestamp":1735311565,"nonce":"ijXYWPr1w6as0fYGzIMO/ndJ+Tc=","metadata":{"github-id":"IC_kwDOJl1IZM6Y0Cfo","github-url":"https://github.com/nikitabobko/AeroSpace/issues/423#issuecomment-2563778536"},"message":"I stumbled upon this issue since I was going to achieve something similar. In my case, I wanted to hide empty workspaces. So I just came up with this workaround. I put it here for anyone interested:\n\n`sketchybarrc`\n```bash\nsketchybar --add event aerospace_workspace_change\nfor sid in $(aerospace list-workspaces --all); do\n    sketchybar --add item space.$sid left \\\n        --subscribe space.$sid aerospace_workspace_change \\\n        --set space.$sid \\\n        click_script=\"aerospace workspace $sid\" \\\n        script=\"$CONFIG_DIR/plugins/aerospace.sh $sid\"\ndone\n```\n\n`aerospace.sh`\n```bash\n#!/usr/bin/env bash\nsource \"$CONFIG_DIR/colors.sh\" # Loads all defined colors\n\nSID=\"$1\"\nPADDING_LEFT=9\nPADDING_RIGHT=10\n\nINACTIVE_COLOR=$ACCENT_COLOR\nEMPTY_WS_COLOR=$GRAY_ITEM_BG_COLOR\n\t\nCURRENT_WORKSPACE=$(\u003c~/.current_workspace)\nEMPTY_WORKSPACES=$(\u003c~/.empty_workspaces)\n\nif [ \"$SID\" = \"$CURRENT_WORKSPACE\" ]; then\n\tsketchybar --set $NAME drawing=on background.drawing=on \\\n\t\ticon.drawing=off \\\n\t\tbackground.color=$ACCENT_COLOR \\\n\t\tlabel.color=$BAR_COLOR \\\n\t\tlabel=\"$1\" \\\n\t\tlabel.padding_right=$PADDING_RIGHT \\\n\t\tlabel.padding_left=$PADDING_LEFT\nelse\n\t\tif [[ $EMPTY_WORKSPACES == *\"$SID\"* ]]; then\n\t\t\t# INACTIVE_COLOR=$EMPTY_WS_COLOR\n\t\t\tsketchybar --set $NAME drawing=off\n\t\t\texit 0\n\t\tfi\n\t\tsketchybar --set $NAME drawing=on background.drawing=off \\\n\t\t\ticon.drawing=off \\\n\t\t\tlabel.color=$INACTIVE_COLOR \\\n\t\t\tlabel=\"$1\" \\\n\t\t\tlabel.padding_right=$PADDING_RIGHT \\\n\t\t\tlabel.padding_left=$PADDING_LEFT\nfi\n```\nIn your case comment out this line `# INACTIVE_COLOR=$EMPTY_WS_COLOR`  and remove 2 lines below it. Also make sure to change the color variables.\n\n`aerospace.toml`\n```toml\n# Notify Sketchybar about workspace change\nexec-on-workspace-change = ['/bin/bash', '-c',\n    'echo $AEROSPACE_FOCUSED_WORKSPACE \u003e ~/.current_workspace'\n]\n# Notify Sketchybar about moving windows to a different workspace and changing workspaces\non-focus-changed = ['exec-and-forget aerospace list-workspaces --monitor all --empty \u003e ~/.empty_workspaces \u0026\u0026 sketchybar --trigger aerospace_workspace_change']\n```\n\nThere are 2 things to consider:\n* For performance reasons I use `~/.current_workspace` and `~/.empty_workspaces`. This is because if you have 9 workspaces, for example, then the event `aerospace_workspace_change` will be triggered 9 times and running the aerospace commands inside `aerospace.sh` directly will slow down the UI.\n* This has one disadvantage: When I press mode+num to change the workspace, the sketchybar will be updated after the window is visible on the screen. There will be a slight delay. I like to see the sketchybar to be updated as soon as I press the key on my keyboard. So in that case you may change the `aerospace.toml` to the following:\n```toml\n# Notify Sketchybar about workspace change\nexec-on-workspace-change = ['/bin/bash', '-c',\n    'echo $AEROSPACE_FOCUSED_WORKSPACE \u003e ~/.current_workspace \u0026\u0026 sketchybar --trigger aerospace_workspace_change'\n]\n# Notify Sketchybar about moving windows to a different workspace and changing workspaces\non-focus-changed = ['exec-and-forget sleep 0.1 \u0026\u0026 aerospace list-workspaces --monitor all --empty \u003e ~/.empty_workspaces \u0026\u0026 sketchybar --trigger aerospace_workspace_change']\n```\nThe sleep command is there to prevent race condition.\n\nIt would be cool to see an event that decouples changes to windows inside a workspace from workspace changes. Something like `workspace-window-change` that would capture ONLY changes to windows in a workspace like moving a node out of the workspace or creating and destroying windows in the workspace BUT NOT workspace switching. Then that would work better with sketchybar.","files":null}]}