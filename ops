{"author":{"id":"2d08e4816aca0a07db9878f126b0e7f6d6f1362eb9bc4804be6b33ff8d0a19ec"},"ops":[{"type":6,"timestamp":1720166097,"nonce":"7t3JVaqVtCaTj4DDF7Cy77wT3IE=","metadata":{"github-id":"UCE_lAHOJl1IZM6Ok-8ozl8Jl_4"},"target":"371616e2b8ecdcb0166bbefb4a4436512caad74b7db42687ea95161974bbfc80","message":"The proposal is to introduce `on-workspace-touched` callback. When the workspace is updated in any way (focused changed to/from the workspace, children are attached/removed, ~~name/tag is changed (oh,fuck)~~)\n\nUse case:\n```toml\non-workspace-touched = 'echo %{workspace-mru-app-name} | xargs rename-workspace --tag'\n```\n\nIt'd require introduction of `workspace-mru-app-name` interpolation variable (\"MRU\" stands for \"most recently used\")\n\n**Alternative names:** `on-workspace-used` (similar to \"MRU\"), `on-workspace-updated` (Does \"focus\" update the workspace?)\n\n**Alternative.** Allow interpolation variables directly inside `rename-workspace`? `rename-workspace --tag %{workspace-mru-app-name}`. Then, for the consistency, they should be allowed in literally all commands. `workspace %{next-workspace}`, `focus --window-id %{left-window-id}`, etc. jeez\n\n**Problem.** Any command run inside the callback will probably change the workspace again. `rename-workspace` changes the workspace, which leads to infinite loop.\n\nPossible solutions:\n- More fine-grained callback. `on-workspace-children-changed` (sounds too specific. Is it useful in general case?)\n- Detect changes from the callback itself, and don't retrigger recursively. **Sounds the most promising**\n- ~~Don't do anything with this problem. Assume that the script inside is idempotent, which will cause recursion only once~~ I completely dislike it. At least because commands need to make sure no to call the callback if they detect that they noop\n\n**Depends on:** #245 #278","files":null},{"type":6,"timestamp":1720172383,"nonce":"DPuOe/oGiBQh/vI2oQ+xj8cmIuI=","metadata":{"github-id":"UCE_lAHOJl1IZM6Ok-8ozl8LrTM"},"target":"371616e2b8ecdcb0166bbefb4a4436512caad74b7db42687ea95161974bbfc80","message":"The proposal is to introduce `on-workspace-touched` callback. When the workspace is updated in any way (focused changed to/from the workspace, children are attached/removed, name/tag is changed ~~(oh,fuck, see below)~~)\n\nUse case:\n```toml\non-workspace-touched = 'echo %{workspace-mru-app-name} | xargs rename-workspace --tag'\n```\n\nIt'd require introduction of `workspace-mru-app-name` interpolation variable (\"MRU\" stands for \"most recently used\")\n\n**Alternative names:** `on-workspace-used` (similar to \"MRU\"), `on-workspace-updated` (Does \"focus\" update the workspace?)\n\n**Alternative.** Allow interpolation variables directly inside `rename-workspace`? `rename-workspace --tag %{workspace-mru-app-name}`. Then, for the consistency, they should be allowed in literally all commands. `workspace %{next-workspace}`, `focus --window-id %{left-window-id}`, etc. jeez\n\n**Problem.** Any command run inside the callback will probably change the workspace again. `rename-workspace` changes the workspace, which leads to infinite loop.\n\nPossible solutions:\n- More fine-grained callback. `on-workspace-children-changed` (sounds too specific. Is it useful in general case?)\n- Detect changes from the callback itself, and don't retrigger recursively. **Sounds the most promising**\n- ~~Don't do anything with this problem. Assume that the script inside is idempotent, which will cause recursion only once~~ I completely dislike it. At least because commands need to make sure no to call the callback if they detect that they noop\n\n**Depends on:** #245 #278","files":null},{"type":6,"timestamp":1720175236,"nonce":"phin3RQZalw/f6saYZX1A2JONIY=","metadata":{"github-id":"UCE_lAHOJl1IZM6Ok-8ozl8Mle0"},"target":"371616e2b8ecdcb0166bbefb4a4436512caad74b7db42687ea95161974bbfc80","message":"The proposal is to introduce `on-workspace-touched` callback. When the workspace is updated in any way (focused changed to/from the workspace, children are attached/removed, name/tag is changed ~~(oh,fuck, see below)~~)\n\nUse case:\n```toml\non-workspace-touched = 'echo %{workspace-mru-app-name} | xargs rename-workspace --tag'\n```\n\nIt'd require introduction of `workspace-mru-app-name` interpolation variable (\"MRU\" stands for \"most recently used\")\n\n**Alternative names:** `on-workspace-used` (similar to \"MRU\"), `on-workspace-updated` (Does \"focusing the workspace\" update it?)\n\n**Alternative.** Allow interpolation variables directly inside `rename-workspace`? `rename-workspace --tag %{workspace-mru-app-name}`. Then, for the consistency, they should be allowed in literally all commands. `workspace %{next-workspace}`, `focus --window-id %{left-window-id}`, etc. jeez\n\n**Problem.** Any command run inside the callback will probably change the workspace again. `rename-workspace` changes the workspace, which leads to infinite loop.\n\nPossible solutions:\n- More fine-grained callback. `on-workspace-children-changed` (sounds too specific. Is it useful in general case?)\n- Detect changes from the callback itself, and don't retrigger recursively. **Sounds the most promising**\n- ~~Don't do anything with this problem. Assume that the script inside is idempotent, which will cause recursion only once~~ I completely dislike it. At least because commands need to make sure no to call the callback if they detect that they noop\n\n**Depends on:** #245 #278","files":null},{"type":5,"timestamp":1720166055,"nonce":"ix0FI+E4JWbutnvda/HYSzqof3s=","metadata":{"github-id":"LE_lADOJl1IZM6Ok-8ozwAAAAMe3VGz"},"added":["design-needed"],"removed":[]},{"type":3,"timestamp":1723627584,"nonce":"t19HZaATzG7BVjB4E31+a1ecqJE=","metadata":{"github-id":"IC_kwDOJl1IZM6IZFsy","github-url":"https://github.com/nikitabobko/AeroSpace/issues/316#issuecomment-2288278322"},"message":"To consider:\n\n- `on-workspace-tree-updated`\n- `on-refresh` (after each \"refresh session\")","files":null},{"type":6,"timestamp":1728668176,"nonce":"TIsCgFzrlonZbNEx05G2KNbAWcU=","metadata":{"github-id":"UCE_lALOJl1IZM6IZFsyzlIe8PI"},"target":"d488bf78ca8729c6dfc35a5af5fb61ff68dfb333f58830889a20d6091af93d63","message":"To consider:\n\n- `on-workspace-tree-updated`\n- `on-refresh` (after each \"refresh session\")\n- `on-workspace-redraw`","files":null},{"type":2,"timestamp":1728668283,"nonce":"FzXrCyxdRibnSv3c0D8PL9cX48Y=","metadata":{"github-id":"RTE_lADOJl1IZM6Ok-8ozwAAAANm91bl"},"title":"`on-workspace-touched`/`on-workspace-redraw` callback","was":"`on-workspace-touched`/`on-workspace-redraw` callback"},{"type":5,"timestamp":1730033107,"nonce":"3yzFm+Jrd1QSJgeG5OJTROPXlC8=","metadata":{"github-id":"LE_lADOJl1IZM6Ok-8ozwAAAAN5kKe2"},"added":["triaged"],"removed":[]}]}