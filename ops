{"author":{"id":"2d08e4816aca0a07db9878f126b0e7f6d6f1362eb9bc4804be6b33ff8d0a19ec"},"ops":[{"type":3,"timestamp":1726841457,"nonce":"TLh56JyCZUi87y0Els+Z25lj/Qw=","metadata":{"github-id":"IC_kwDOJl1IZM6M5UJG","github-url":"https://github.com/nikitabobko/AeroSpace/issues/497#issuecomment-2363834950"},"message":"\u003e Okay so I've found at least one of the problematic accessibility calls. While inspecting a 4 second hang, I can see a call to `AXUIElementCopyAttributeValue` that takes 1.87s to complete. That's half of the hang accounted for at least.\n\n@jakenvac on your profiling screenshot the hang happened in the `disableAnimations`. `disableAnimations` is a suspicious thing to circumvent animations that might appear in random situations #51 12e7737a9eda1fffb3cfc883c383fef4f463861e (primarly when macOS built-in accessibility features are used, but not necessarily)\n\nBlind guess. Does it become better for Godot (or whatever game engine you're testing on) if you drop `disableAnimations`?\n\n```diff\ndiff --git a/Sources/AppBundle/tree/MacWindow.swift b/Sources/AppBundle/tree/MacWindow.swift\nindex a17a181..6d9e0df 100644\n--- a/Sources/AppBundle/tree/MacWindow.swift\n+++ b/Sources/AppBundle/tree/MacWindow.swift\n@@ -149,10 +149,8 @@ final class MacWindow: Window, CustomStringConvertible {\n     }\n \n     override func setSize(_ size: CGSize) -\u003e Bool {\n-        disableAnimations {\n-            previousSize = getSize()\n-            return axWindow.set(Ax.sizeAttr, size)\n-        }\n+        previousSize = getSize()\n+        return axWindow.set(Ax.sizeAttr, size)\n     }\n \n     override func getSize() -\u003e CGSize? {\n@@ -160,9 +158,7 @@ final class MacWindow: Window, CustomStringConvertible {\n     }\n \n     override func setTopLeftCorner(_ point: CGPoint) -\u003e Bool {\n-        disableAnimations {\n-            axWindow.set(Ax.topLeftCornerAttr, point)\n-        }\n+        axWindow.set(Ax.topLeftCornerAttr, point)\n     }\n \n     override func getTopLeftCorner() -\u003e CGPoint? {\n```","files":null}]}