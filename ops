{"author":{"id":"01671ff9032e46364812e0318334f210ee83239f58dc81dc28f5ed24ec9fc21c"},"ops":[{"type":1,"timestamp":1723569355,"nonce":"Ghnge7RSd5wYay9sjSNiLRPMKsM=","metadata":{"github-id":"I_kwDOJl1IZM6S2zg8","github-url":"https://github.com/nikitabobko/AeroSpace/issues/402","origin":"github"},"title":"`move-node-to-workspace` not triggering `exec-on-workspace-change` in `[[on-window-detected]]` clause","message":"An established event for `sketchybar` appears not trigger when window is automatically moved to a workspace. \n\nRelevant toml\n```toml\n# Sketchybar\nexec-on-workspace-change = [\n    '/bin/bash', \n    '-c',\n    'sketchybar --trigger aerospace_workspace_change FOCUSED_WORKSPACE=$AEROSPACE_FOCUSED_WORKSPACE'\n]\n\n[[on-window-detected]]\nif.app-id = 'com.apple.Music'\nrun = ['move-node-to-workspace 3']\n```\n\nRelevant sketchybarrc\n```bash\nsketchybar --add event aerospace_workspace_change\nfor sid in $(aerospace list-workspaces --all); do\n    sketchybar --add item space.$sid left \\\n        --subscribe space.$sid aerospace_workspace_change space_windows_change space_change \\\n        --set space.$sid \\\n        background.color=0xffffffff  \\\n        background.corner_radius=5 \\\n        background.height=20 \\\n        background.drawing=off \\\n        icon.drawing=off \\\n        label=\"$sid\" \\\n        label.padding_right=6 \\\n        click_script=\"aerospace workspace $sid\" \\\n        script=\"$PLUGIN_DIR/aerospace.sh $sid\"\ndone\n```\n\nAerospace Script\n```bash\n#!/usr/bin/env bash\n\n# Set Background\nif [[ -z \"$FOCUSED_WORKSPACE\" ]]; then\n    focused_space=$(aerospace list-workspaces --focused)\n    sketchybar --set space.$focused_space background.drawing=on label.color=0xff000000 label=\"$focused_space [$(aerospace list-windows --workspace focused | wc -l | grep -Eo '\\d')]\"\nelif [[ \"$1\" = \"$FOCUSED_WORKSPACE\" ]]; then\n    sketchybar --set $NAME background.drawing=on label.color=0xff000000 label=\"$1 [$(aerospace list-windows --workspace focused | wc -l | grep -Eo '\\d')]\"\nelse\n    sketchybar --set $NAME background.drawing=off label.color=0x44ffffff label=\"$(echo $NAME | grep -Eo '[0-9]{1,4}')\"\nfi\n```","files":null}]}