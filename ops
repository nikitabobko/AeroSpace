{"author":{"id":"310c0acd07de462751559c2d4f41a5f8baeaeea9217d552e45a9684adf786d2e"},"ops":[{"type":3,"timestamp":1722308463,"nonce":"TrPNcNro+6GcbzaPDvyJF1xP5BE=","metadata":{"github-id":"IC_kwDOJl1IZM6GjKqa","github-url":"https://github.com/nikitabobko/AeroSpace/issues/289#issuecomment-2257365658"},"message":"The issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```","files":null},{"type":6,"timestamp":1722309127,"nonce":"Wkg0KMlw2ahTKXJJtuAEeuoTzaM=","metadata":{"github-id":"UCE_lALOJl1IZM6GjKqazkwGQX8"},"target":"cf05c334118b53ce662e88b3d6cabc503a89249b4ec75bdd69c52b147daffaf4","message":"The issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```\n\nOne side note that if two chrome windows are in the same workspace and only move focus between two windows, no looping/bouncing/flickering happens.","files":null},{"type":6,"timestamp":1722310962,"nonce":"lKMTwyH+yXW7BzGHR+yN/HfK3qc=","metadata":{"github-id":"UCE_lALOJl1IZM6GjKqazkwGjos"},"target":"cf05c334118b53ce662e88b3d6cabc503a89249b4ec75bdd69c52b147daffaf4","message":"The issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```\n\nOne side note that if two chrome windows are in the same workspace and only move focus between two windows, no looping/bouncing/flickering happens.\n\n--- Update\nI follow the devleoper guide and run the debug mode in my laptop to reproduce the issue, here is the output\n\n```\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\n... reapting until I focus on other non-chrome window\n```","files":null},{"type":6,"timestamp":1722312464,"nonce":"N5jdacLH29AI9LyJ/IMDrOwjDzA=","metadata":{"github-id":"UCE_lALOJl1IZM6GjKqazkwGzdo"},"target":"cf05c334118b53ce662e88b3d6cabc503a89249b4ec75bdd69c52b147daffaf4","message":"\u003e Then I'd appreciate if somebody who has this problem reproducible to \"git bisect\" the bug in the [v0.11.2-Beta...v0.12.0-Beta](https://github.com/nikitabobko/AeroSpace/compare/v0.11.2-Beta...v0.12.0-Beta) range\n\u003e \n\u003e I'd start by reverting [588f697](https://github.com/nikitabobko/AeroSpace/commit/588f697b09f632576eb565ca3800d805c2eeb0d4)\n\n\nThe issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```\n\nOne side note that if two chrome windows are in the same workspace and only move focus between two windows, no looping/bouncing/flickering happens.\n\n--- Update\nI follow the devleoper guide and run the debug mode in my laptop to reproduce the issue, here is the output\n\n```\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\n... reapting until I focus on other non-chrome window\n```\n\nLocal tested via reverting this commit 588f697b09f632576eb565ca3800d805c2eeb0d4 in the latest main branch (e03bfac3328ede090d29e736f2cb0103574f1ac8), the issue disappears.\nBut can flicker when changing workspaces","files":null},{"type":6,"timestamp":1722312828,"nonce":"Jniqb9ebmIPBc5B55k2ANOZB/xM=","metadata":{"github-id":"UCE_lALOJl1IZM6GjKqazkwG3wA"},"target":"cf05c334118b53ce662e88b3d6cabc503a89249b4ec75bdd69c52b147daffaf4","message":"\u003e Then I'd appreciate if somebody who has this problem reproducible to \"git bisect\" the bug in the [v0.11.2-Beta...v0.12.0-Beta](https://github.com/nikitabobko/AeroSpace/compare/v0.11.2-Beta...v0.12.0-Beta) range\n\u003e \n\u003e I'd start by reverting [588f697](https://github.com/nikitabobko/AeroSpace/commit/588f697b09f632576eb565ca3800d805c2eeb0d4)\n\n\nThe issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```\n\nOne side note that if two chrome windows are in the same workspace and only move focus between two windows, no looping/bouncing/flickering happens.\n\n--- Update\nI follow the devleoper guide and run the debug mode in my laptop to reproduce the issue, here is the output\n\n```\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\n... reapting until I focus on other non-chrome window\n```\n\nLocal tested via reverting this commit 588f697b09f632576eb565ca3800d805c2eeb0d4 in the latest main branch (e03bfac3328ede090d29e736f2cb0103574f1ac8), the issue looping/bouncing disappears.\nBut a bit flicker when changing workspaces","files":null},{"type":6,"timestamp":1722316989,"nonce":"IqPbvEqnEnh7lGgyPnJMFWi6FGo=","metadata":{"github-id":"UCE_lALOJl1IZM6GjKqazkwHmzs"},"target":"cf05c334118b53ce662e88b3d6cabc503a89249b4ec75bdd69c52b147daffaf4","message":"\u003e Then I'd appreciate if somebody who has this problem reproducible to \"git bisect\" the bug in the [v0.11.2-Beta...v0.12.0-Beta](https://github.com/nikitabobko/AeroSpace/compare/v0.11.2-Beta...v0.12.0-Beta) range\n\u003e \n\u003e I'd start by reverting [588f697](https://github.com/nikitabobko/AeroSpace/commit/588f697b09f632576eb565ca3800d805c2eeb0d4)\n\n\nThe issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```\n\nOne side note that if two chrome windows are in the same workspace and only move focus between two windows, no looping/bouncing/flickering happens.\n\n--- Update\nI follow the devleoper guide and run the debug mode in my laptop to reproduce the issue, here is the output\n\n```\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\n... reapting until I focus on other non-chrome window\n```\n\nLocal tested via reverting this commit 588f697b09f632576eb565ca3800d805c2eeb0d4 in the latest main branch (e03bfac3328ede090d29e736f2cb0103574f1ac8), the issue looping/bouncing disappears.\nBut a bit flicker when changing workspaces\n\nIf chaging the logic to hide all invisible windows first, then unhide visible windows. No issue but will flicker and show desktop.","files":null},{"type":6,"timestamp":1722318194,"nonce":"fR/Yfx9Jpz2lNCJ8aPDIbEc84Uc=","metadata":{"github-id":"UCE_lALOJl1IZM6GjKqazkwH2D8"},"target":"cf05c334118b53ce662e88b3d6cabc503a89249b4ec75bdd69c52b147daffaf4","message":"\u003e Then I'd appreciate if somebody who has this problem reproducible to \"git bisect\" the bug in the [v0.11.2-Beta...v0.12.0-Beta](https://github.com/nikitabobko/AeroSpace/compare/v0.11.2-Beta...v0.12.0-Beta) range\n\u003e \n\u003e I'd start by reverting [588f697](https://github.com/nikitabobko/AeroSpace/commit/588f697b09f632576eb565ca3800d805c2eeb0d4)\n\n\nThe issue persists in latest beta version (0.13.3-Beta) and I can reproduce the issue in my laptop with external display plugged\n\n```\n❯ aerospace list-monitors\n1 | DELL U2720Q\n2 | Built-in Retina Display\n```\n\nwhen assigning 2 different chrome window into workspace 1 and workspace 2 and mauanlly switch between workspace few times (press option+1, option+2, option+1, and repeat), the issue appears.\n\n```\n❯ aerospace list-windows --all --format '%{app-name}|%{workspace}'\nAlacritty|4\nGoogle Chrome|1\nGoogle Chrome|2\n```\n\nOne side note that if two chrome windows are in the same workspace and only move focus between two windows, no looping/bouncing/flickering happens.\n\n--- Update\nI follow the devleoper guide and run the debug mode in my laptop to reproduce the issue, here is the output\n\n```\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31063\")')\nhideViaEmulation: Hide Window(title: 'Optional(\"New Incognito tab - Google Chrome (Incognito)\")', role: 'Optional(\"AXWindow\")', subrole: 'Optional(\"AXStandardWindow\")', identifier: 'nil', modal: 'Optional(\"false\")', windowId: 'Optional(\"31067\")')\n... reapting until I focus on other non-chrome window\n```\n\nLocal tested via reverting this commit 588f697b09f632576eb565ca3800d805c2eeb0d4 in the latest main branch (e03bfac3328ede090d29e736f2cb0103574f1ac8), the issue looping/bouncing disappears.\nBut a bit flicker when changing workspaces\n\nIf chaging the logic to hide all invisible windows first, then unhide visible windows. No issue but will flicker and show desktop.\n\n--- Update\n\nit seems that the issue is related to the external monitor, and the display arragenement matters.\nI put the chrome 1 and chrome 2 in the external monitor, with workspace 1 and workspace 2.\n\u003cimg width=\"578\" alt=\"image\" src=\"https://github.com/user-attachments/assets/2915e846-dfbb-41dd-a027-a70be9e5d298\"\u003e\nwhen the external monitor arranges below the build-in display. All the invisible windows correctly hide in the right corner. And when switching between workspace 1 and workspace 2, it will not lead to the looping issue.\n\nMeanwhile, if put the the external display above the built-in display, the issue happens.\nAnd it seems that the invisible windows do not correctly hide in the right corner of the screen. Instead, they appear in the built-in display one by one, and fall into the infinite loop\n![image](https://github.com/user-attachments/assets/d09a73c6-cd67-4f90-bd25-a250cee90a7a)\n\nIf I put 2 chrome windows seperately, one in the external monitor and one in the built-in display, I can not reproduce the issue.","files":null},{"type":3,"timestamp":1722501938,"nonce":"B23zNQAQnGWTLz1rFmxSLKExc44=","metadata":{"github-id":"IC_kwDOJl1IZM6G2ZnA","github-url":"https://github.com/nikitabobko/AeroSpace/issues/289#issuecomment-2262407616"},"message":"Hi @nikitabobko \n\nI did the bisect to narrow down the issue\n\nSteps:\n\n```bash\ngit checkout \u003ccommit_id\u003e\n# follow the dev-guide to setup the environment\n./build-debug.sh\n./run-debug.sh\n# try to reproduce the issue, as I mentioned above\n```\n\nAs a result\n@9ee96e07918bac7a2f9f473f85dc67884dae81b3 no issue\n@588f697b09f632576eb565ca3800d805c2eeb0d4 have issue # yes this is the suspioues commit you mentioned above\n@7bb24b5f04b1c97fc9154520c5353b674e436c5e  have issue\n\nAll points to the commit 588f697b09f632576eb565ca3800d805c2eeb0d4 involved the issue and it seems that after this patch, somehow the sequence of hiding and unhiding will lead to this looping.\n\nSorry but I'm rookie in swift and can not move it forward, if anything I can help with this issue please lemme know.","files":null},{"type":6,"timestamp":1722501949,"nonce":"lItBcUIUOeFIchUhAJhOLS7nPfM=","metadata":{"github-id":"UCE_lALOJl1IZM6G2ZnAzkw_tbs"},"target":"d8bbe159c13782a6be3a87ef3684879a6698c9d732f4be81b6002f72a79f8a93","message":"Hi @nikitabobko \n\nI did the bisect to narrow down the issue\n\nSteps:\n\n```bash\ngit checkout \u003ccommit_id\u003e\n# follow the dev-guide to setup the environment\n./build-debug.sh\n./run-debug.sh\n# try to reproduce the issue, as I mentioned above\n```\n\nAs a result\n```\n@9ee96e07918bac7a2f9f473f85dc67884dae81b3 no issue\n@588f697b09f632576eb565ca3800d805c2eeb0d4 have issue # yes this is the suspioues commit you mentioned above\n@7bb24b5f04b1c97fc9154520c5353b674e436c5e  have issue\n```\n\nAll points to the commit 588f697b09f632576eb565ca3800d805c2eeb0d4 involved the issue and it seems that after this patch, somehow the sequence of hiding and unhiding will lead to this looping.\n\nSorry but I'm rookie in swift and can not move it forward, if anything I can help with this issue please lemme know.","files":null}]}