{"author":{"id":"874e9296cdffc3475c4c2fde289194b3524f2f9809e119df0bb225b4369a5c4f"},"ops":[{"type":3,"timestamp":1718094708,"nonce":"yG1KdKkbb9oO4MEzWiYrsCglIQs=","metadata":{"github-id":"IC_kwDOJl1IZM6AwL97","github-url":"https://github.com/nikitabobko/AeroSpace/issues/175#issuecomment-2160115579"},"message":"I've no idea why on my environment M3 Max Macbook,  `exec-on-workspace-change` can't work, it just doesn't trigger the event.\n\nI implemented a focused workspace indicator using [SbarLua](https://github.com/FelixKratz/SbarLua), used this [sketchybar config](https://github.com/FelixKratz/dotfiles/tree/master/.config/sketchybar) as a starting point.\n\nI post here for anyone who is interested.\n\n```lua\nlocal sbar = require(\"sketchybar\")\nlocal colors = require(\"colors\")\nlocal settings = require(\"settings\")\n\nlocal workspace = sbar.add(\"item\", \"aerospace\", {\n    position = \"right\",\n    label = {\n        string = \"\",\n        color = colors.white,\n        highlight_color = colors.green,\n        font = {\n            family = settings.font.numbers,\n            style = settings.font.style_map[\"Bold\"],\n            size = 20.0,\n        },\n        drawing = true,\n    },\n    padding_right = 12,\n})\n\nlocal function highlight_focused_workspace(env)\n    sbar.exec(\"aerospace list-workspaces --focused\", function(focused_workspace)\n        for id in focused_workspace:gmatch(\"%S+\") do\n            local is_focused = tostring(id) == focused_workspace:match(\"%S+\")\n            sbar.animate(\"sin\", 10, function()\n                workspace:set({\n                    icon = {\n                        highlight = is_focused\n                    },\n                    label = {\n                        highlight = is_focused,\n                        string = id,\n                    },\n                })\n            end)\n        end\n    end)\nend\n\n-- Subscribe to the front_app_switched event to highlight the focused workspace\nworkspace:subscribe(\"front_app_switched\", highlight_focused_workspace)\n\n-- Initially highlight the focused workspace\nhighlight_focused_workspace()\n\nreturn workspace\n```","files":null},{"type":6,"timestamp":1718094759,"nonce":"yLjRaW59iGHOfmoxubtcHkCDAVU=","metadata":{"github-id":"UCE_lALOJl1IZM6AwL97zkg_hXc"},"target":"a4616f16c9833fbdec8eb6dec869a8aac7193f91462c67a14687280768b2dc83","message":"I've no idea why on my environment M3 Max Macbook,  `exec-on-workspace-change` can't work, it just doesn't trigger the event.\n\nI implemented a focused workspace indicator using [SbarLua](https://github.com/FelixKratz/SbarLua), used this [sketchybar config](https://github.com/FelixKratz/dotfiles/tree/master/.config/sketchybar) as a starting point.\n\nI post here for anyone who is interested.\n\n`items/aerospaces.lua`\n\n```lua\nlocal sbar = require(\"sketchybar\")\nlocal colors = require(\"colors\")\nlocal settings = require(\"settings\")\n\nlocal workspace = sbar.add(\"item\", \"aerospace\", {\n    position = \"right\",\n    label = {\n        string = \"\",\n        color = colors.white,\n        highlight_color = colors.green,\n        font = {\n            family = settings.font.numbers,\n            style = settings.font.style_map[\"Bold\"],\n            size = 20.0,\n        },\n        drawing = true,\n    },\n    padding_right = 12,\n})\n\nlocal function highlight_focused_workspace(env)\n    sbar.exec(\"aerospace list-workspaces --focused\", function(focused_workspace)\n        for id in focused_workspace:gmatch(\"%S+\") do\n            local is_focused = tostring(id) == focused_workspace:match(\"%S+\")\n            sbar.animate(\"sin\", 10, function()\n                workspace:set({\n                    icon = {\n                        highlight = is_focused\n                    },\n                    label = {\n                        highlight = is_focused,\n                        string = id,\n                    },\n                })\n            end)\n        end\n    end)\nend\n\n-- Subscribe to the front_app_switched event to highlight the focused workspace\nworkspace:subscribe(\"front_app_switched\", highlight_focused_workspace)\n\n-- Initially highlight the focused workspace\nhighlight_focused_workspace()\n\nreturn workspace\n```","files":null}]}