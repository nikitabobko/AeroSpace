{"author":{"id":"69eac205e8df31f11ecfc31baed5fd00141ba5cc61c65346f19d657aa7a90c21"},"ops":[{"type":1,"timestamp":1723801364,"nonce":"Vyg5ihmXWoqIWa+o9WKQUdJIIqU=","metadata":{"github-id":"I_kwDOJl1IZM6TN8Mf","github-url":"https://github.com/nikitabobko/AeroSpace/issues/423","origin":"github"},"title":"Get workspaces which are empty for sketchybar?","message":"Currently I have this:\n```bash\n# ./items/spaces.sh\n#!/usr/bin/env bash\n\nsketchybar --add event aerospace_workspace_change\n\n# Get all workspaces\nWORKSPACES=$(aerospace list-workspaces --all)\n\n# Get empty workspaces\nEMPTY_WORKSPACES=$(aerospace list-workspaces --monitor all --empty)\n\nfor i in $WORKSPACES; do\n\tsid=$i\n\n\tif echo \"$EMPTY_WORKSPACES\" | grep -q \"$sid\"; then\n\t\tempty_sid=$sid\n\tfi\n\n\tsketchybar --add space space.$sid left \\\n\t\t--subscribe space.$sid aerospace_workspace_change system_woke \\\n\t\t--set space.$sid associated_space=$sid \\\n\t\tlabel.drawing=off \\\n\t\ticon.padding_left=9 \\\n\t\ticon.padding_right=9 \\\n\t\tbackground.padding_left=2 \\\n\t\tbackground.padding_right=2 \\\n\t\tbackground.color=0x22ffffff \\\n\t\tbackground.corner_radius=4 \\\n\t\tbackground.height=22 \\\n\t\tbackground.drawing=off \\\n\t\tscript=\"$PLUGIN_DIR/space.sh $empty_sid\"\ndone\n```\n\n```bash\n# ./plugins/space.sh√ç\n#!/usr/bin/env bash\n\nsource \"$HOME/.config/sketchybar/variables.sh\" # Loads all defined colors\n\nSPACE_CLICK_SCRIPT=\"aerospace workspace $SID\"\n\nEMPTY_SID=$1\n\nif [ $SID = \"$EMPTY_SID\" ]; then\n\tINACTIVE_COLOR=\"$COMMENT\"\nelse\n\tINACTIVE_COLOR=\"$WHITE\"\nfi\n\nif [ $SID = \"$FOCUSED_WORKSPACE\" ]; then\n\tsketchybar --animate tanh 5 --set \"$NAME\" \\\n\t\ticon.color=\"$INACTIVE_COLOR\" \\\n\t\ticon=\"$SID\" \\\n\t\tbackground.drawing=on \\\n\t\tclick_script=\"$SPACE_CLICK_SCRIPT\"\nelse\n\tsketchybar --animate tanh 5 --set \"$NAME\" \\\n\t\ticon.color=\"$INACTIVE_COLOR\" \\\n\t\ticon=\"$SID\" \\\n\t\tbackground.drawing=off \\\n\t\tclick_script=\"$SPACE_CLICK_SCRIPT\"\nfi\n```\n\n```toml\n# aerospace.toml\n...\nexec-on-workspace-change = ['/bin/bash', '-c',\n    'sketchybar --trigger aerospace_workspace_change FOCUSED_WORKSPACE=$AEROSPACE_FOCUSED_WORKSPACE'\n]\n...\n```\n\nWhich results to this:\n\u003cimg width=\"192\" alt=\"image\" src=\"https://github.com/user-attachments/assets/2f889b04-5bab-4825-b49e-6a6d6065580c\"\u003e\n\nThis is great and exactly what I am looking for, but I can't find a way to have this updated when a workspace actually becomes empty or not. I've searched for something relevant in the documentation of aerospace but was not able to find anything sufficient. Am I missing something, or this is just not possible currently?","files":null}]}